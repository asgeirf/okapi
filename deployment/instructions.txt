Deploying
=========

--- 0) Keep track of the changes between release in the Changes Log
in trunk/deployment/shared/changes.html


--- 1) Make sure all unit tests pass

Do a full rebuild of the Maven build:
mvn clean install from /trunk


--- 2) Make sure platform-specific dependencies are downloaded:
from /trunk/framework/core-ui run
mvn -PWIN_SWT -PCOCOA_SWT -PCOCOA_64_SWT -PLinux_x86_swt -PLinux_x86_64_swt dependency:resolve


--- 3) Make sure the following files have the proper version and release numbers for this release:

- All the POM.XML files
- trunk/deployment/shared/release.properties


--- 4) Make also sure the readme files are up-to-date:

- trunk/deployment/maven/data/okapi-lib/readme.html
- trunk/deployment/maven/data/okapi-apps/readme.html


--- 5) Rebuild all

/trunk> mvn clean install
/trunk/deployment/maven> ant
/trunk/applications/integration-tests> mvn integration-test -Dmaven.test.skip=true

This will re-compile, tests, and create the packages.
Then rebuild all distributions for all platforms.
Then run the integration tests for the applications
(The skip option is because you don't need to re-run the unit tests)


--- 6) Update the Okapi Public repository with the proper JARs
(So the examples can be build using Maven)


--- 6.bis) If you have trunk/deployment/utils/tests
Go there and run the batch file
This will run additional integration tests.
The file _tests_results.txt shows any differences between the expected results and the curren ones. Note that some differences may be fine if they are coming from a fix or a new feature. Update the gold files if it is the case.
//TODO: Port those tests to applications integration tests


--- 7) Post each packge (.zip or .gz) of the distributions to the GoogleCode download area.
Use the following summary, in this order:
Okapi Libraries for all platforms (GZIP)
Okapi Libraries for all platforms (ZIP)
Okapi Applications for Macintosh Carbon
Okapi Applications for Macintosh Cocoa
Okapi Applications for Linux 64-bit
Okapi Applications for Linux
Okapi Applications for Windows

--- 8) Update the Web site with any files that was modified in trunk/website. Usually at least the JavaDoc, the updates.html and the downloads.html should be updated.

Host: ftp.opentag.com
Username: same as for the shared documents
Password: same as for the shared documents
Start directory: okapi

The structure in the okapi directory is the same as in trunk/website


--- 9) Commit all changed files
This revision is the one for this release.


--- 10) Post notifications that a new release is available.
At least here: http://tech.groups.yahoo.com/group/okapitools/


--- 11) Update the versions numbers in the files for the next version
- All the POM.XML files
- trunk/deployment/shared/release.properties
Now any new build will be a snapshot of the next release


-end-
