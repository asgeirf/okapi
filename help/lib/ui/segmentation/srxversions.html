<html>

<head>
<link rel="stylesheet" type="text/css" href="../../../help.css">
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Segmentation Rules Editor</title>
</head>

<body>

<h1>SRX Versions</h1>
<p>There are two version of SRX: 1.0 and 2.0.</p>
<p>SRX version 1.0 has been implemented by several tools that interpreted how to 
process the SRX rules in different ways. As a result the same SRX&nbsp;1.0 documents 
used on different tools may give you different segmentation.</p>
<p>To resolve this issue, an updated specification, the version 2.0 has been 
publish and provide better implementation guidelines. So, in theory, the same 
version 2.0 document should give you the same segmentation in all tools.</p>
<p>You can find the specifications of SRX on the LISA web site:</p>
<ul>
	<li>SRX&nbsp;1.0: officially
	<a href="http://www.lisa.org/fileadmin/standards/srx10.html">
	http://www.lisa.org/fileadmin/standards/srx10.html</a> but that link is 
	broken. until it's fixed there is a copy available here:
	<a href="http://www.lisa.org/fileadmin/standards/srx1.0.html">
	http://www.lisa.org/fileadmin/standards/srx1.0.html</a>.</li>
	<li>SRX&nbsp;2.0: <a href="http://www.lisa.org/fileadmin/standards/srx20.html">http://www.lisa.org/fileadmin/standards/srx20.html</a>.</li>
</ul>
<h2>Implementation Differences in SRX 1.0</h2>
<p>There are two main types of implementations of SRX 1.0: the intended one, and 
one that use a cascading matching of the language maps.</p>
<p>SDLX implements the intended one. Heartsome and Swordfish implements the 
cascading one.</p>
<h3>What is the Problem?</h3>
<p>In an SRX document, the segmentation rules are grouped into several <code>
&lt;languagerule&gt;</code> elements. This way you can define different sets of rules 
that you apply for different languages. The select of which which group of rules 
is to use for a given language is driven by a table defined in the <code>
&lt;maprules&gt;</code> element. Each entry in <code>&lt;maprules&gt;</code> is a <code>
&lt;languagemap&gt;</code>. This entry has two information: a regular expression 
pattern that corresponds to what language code should use the entry, and a 
pointer to the group of rules for this entry.</p>
<pre>&lt;languagerules&gt;
 &lt;languagerule languagerulename='default'&gt;
 &lt;/languagerule&gt;
 &lt;languagerule languagerulename='japanese'&gt;
 &lt;/languagerule&gt;
&lt;languagerules&gt;

&lt;maprules&gt;
 &lt;languagemap languagepattern='ja.*' languagerulename='japanese'/&gt;
 &lt;languagemap languagepattern='.*' languagerulename='default'/&gt;
&lt;/maprules&gt;</pre>
<p>The difference between the implementation is how they lookup the &lt;maprules&gt; 
for a given language code.</p>
<ol>
	<li>Some will use <b>only the first</b> &lt;languagemap&gt; that has a 
	languagepattern matching the language code.</li>
	<li>Other will use <b>all</b> &lt;languagemap&gt; that have a languagepattern 
	matching the language code.</li>
</ol>
<p>Which interpretation is correct in SRX&nbsp;1.0?</p>
<p>The first one is correct: In SRX&nbsp;1.0 you use the only first &lt;languagemap&gt; 
that matches the given language code.</p>
<p>It is true that there is nothing in the SRX 1.0 specification that says 
explicitely it should work that way. But there is also nothing explicitely (or 
implicitely) that says all matching &lt;languagemap&gt; should be used.</p>
<p>The only clue to the intended behavior is in the example of the SRX&nbsp;1.0 
specification:</p>
<pre>&lt;languagerules&gt;
 &lt;languagerule languagerulename=&quot;Default&quot;&gt;
<span style="background-color: #00FFFF">  &lt;rule break=&quot;no&quot;&gt;
   &lt;beforebreak&gt;^\s*[0-9]+\.&lt;/beforebreak&gt;
   &lt;afterbreak&gt;\s&lt;/afterbreak&gt;
  &lt;/rule&gt;</span>
<span style="background-color: #00FF00">  &lt;rule break=&quot;no&quot;&gt;
   &lt;beforebreak&gt;[Ee][Tt][Cc]\.&lt;/beforebreak&gt;
   &lt;afterbreak&gt;\s[a-z]&lt;/afterbreak&gt;
  &lt;/rule&gt;</span>
  ...
 &lt;/languagerule&gt;
 &lt;languagerule languagerulename=&quot;Japanese&quot;&gt;
<span style="background-color: #00FFFF">  &lt;rule break=&quot;no&quot;&gt;
   &lt;beforebreak&gt;^\s*[0-9]+\.&lt;/beforebreak&gt;
   &lt;afterbreak&gt;\s&lt;/afterbreak&gt;
  &lt;/rule&gt;</span>
<span style="background-color: #00FF00">  &lt;rule break=&quot;no&quot;&gt;
   &lt;beforebreak&gt;[Ee][Tt][Cc]\.&lt;/beforebreak&gt;
   &lt;afterbreak&gt;&lt;/afterbreak&gt;
  &lt;/rule&gt;</span>
  &lt;rule break=&quot;yes&quot;&gt;
   &lt;beforebreak&gt;[\xff61\x3002\xff0e\xff1f\xff01]+&lt;/beforebreak&gt;
   &lt;afterbreak&gt;&lt;/afterbreak&gt;
  &lt;/rule&gt;
  ...
 &lt;/languagerule&gt;
&lt;/languagerules&gt;

&lt;maprules&gt;
 &lt;maprule maprulename=&quot;Default&quot;&gt;
  &lt;languagemap languagepattern=&quot;JA.*&quot; languagerulename=&quot;Japanese&quot;/&gt;
  &lt;languagemap languagepattern=&quot;.*&quot; languagerulename=&quot;Default&quot;/&gt;
 &lt;/maprule&gt;
&lt;/maprules&gt;</pre>
<p>There is the same rules defined in both the Default and the Japanese. If the 
SRX&nbsp;1.0 intended to use all the languagemap elements that match the given 
language code the duplicated rules that are in Japanese would no be there, and 
only the extra Japanese-specific rule would be listed there.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>SRX&nbsp;1.0 rules coming from Heartsome, Swordfish are designed with cascading. 
So you should make sure that option is set after you have open the file. Ratel 
does not set it automatically because it was not the expected behavior of 
SRX&nbsp;1.0.</p>
<p>SRX&nbsp;1.0 rules coming from Trados, SDLX are designed without cascading. So you 
should make sure that option is not set after you open the file.</p>
<p dir="ltr">Rules order: Exceptions to breaks should be listed first, then the 
break rules. SRX&nbsp;2.0 stops at the first rule that matches. That was the expected 
behavior in SRX&nbsp;1.0 as well (the the example in the SRX&nbsp;1.0 specifiction), but 
some tools did not implemented that way.</p>
<p>&nbsp;</p>
<p>What the open command of the Segmentation rules editor does when opeing an 
SRX&nbsp;1.0 file?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</body>

</html>
